#### 数组

**一、数组基础**

---

**1. 数组概述**

数组是我们最常用的数据类型之一，ECMAScript 数组跟其他语言的数组一样，都是一组有序的数据，但跟其他语言不同的是，数组中每个槽位可以存储任意类型的数据。除此之外，ECMAScript 数组的长度也是动态的，会随着数据的增删而改变。

数组是被等分为许多小块的连续内存段，每个小块都和一个整数关联，可以通过这个整数快速访问对应的小块。除此之外，数组拥有一个 length 属性，该属性表示的并不是数组元素的数量，而是指数组元素的最高序号加 1。

```
let a = [1, 2, 3];
a.length === 3  // true
```

在 ES6 中，可以使用扩展运算符（...）来获取数组元素：

```
let a = [1, 2, 3];
let b = [0, ...a, 4];  // [0, 1, 2, 3, 4]
```

**2. 数组创建**

数组的创建方式有以下两种。

**（1）字面量**

最常用的创建数组的方式就是数组字面量，数组元素的类型可以是任意的，如下：

```
let colors = ["red", [1, 2, 3], true];
```

**（2）构造函数**
使用构造函数创建数组的形式如下：

```
let array = new Array();
```

如果已知数组元素数量，那么就可以给构造函数传入一个数值，然后 length 属性就会被自动创建并保存这个值，比如创建一个长度为 10 的数组：

```
let array = new Array(10);  // [empty × 10]
```

这样，就可以创建一个长度为 10 的数组，数组每个元素的值都是 empty。

还可以给 Array 构造函数传入要保存的元素，比如：

```
let colors = new Array("red", "blue", "green");
```

这就出现问题了，当我们创建数组时，如果给数组传入一个值，如果传入的值是数字，那么就会创建一个长度为指定数字的数组；如果这个值是其他类型，就会创建一个质保函该特定制度额数组。这样我们就无法直接创建一个只包含一个数字的数组了。

Array 构造函数根据参数长度的不同，有如下两种不同的处理方式：
**●new Array(arg1, arg2,…)：**参数长度为 0 或长度大于等于 2 时，传入的参数将按照顺序依次成为新数组的第 0 至第 N 项（参数长度为 0 时，返回空数组）；
**●new Array(length)：**当 length 不是数值时，返回一个只包含 length 元素一项的数组；当 length 为数值时，length 最大不能超过 32 位无符号整型，即需要小于 232，否则将抛出 RangeError。

在使用 Array 构造函数时，也可以省略 new 操作符，结果是一样的：

```
let array = Array();
```

**（3）ES6 构造器**
鉴于数组的常用性，ES6 专门扩展了数组构造器 Array ，新增了 2 个方法：Array.of 和 Array.from。Array.of 用得比较少，Array.from 具有很强的灵活性。

**1）Array.of**
Array.of 用于**将参数依次转化为数组项**，然后返回这个新数组。它基本上与 Array 构造器功能一致，唯一的区别就在单个数字参数的处理上。

比如，在下面的代码中，可以看到：当参数为 2 个时，返回的结果是一致的；当参数是一个时，Array.of 会把参数变成数组里的一项，而构造器则会生成长度和第一个参数相同的空数组：

```
Array.of(8.0); // [8]
Array(8.0); // [empty × 8]

Array.of(8.0, 5); // [8, 5]
Array(8.0, 5); // [8, 5]

Array.of('8'); // ["8"]
Array('8'); // ["8"]
```

**2）Array.from**
Array.from 的设计初衷是快速基于其他对象创建新数组，准确来说就是从一个类似数组的可迭代对象中创建一个新的数组实例。其实，只要一个对象有迭代器，Array.from 就能把它变成一个数组（注意：该方法会返回一个的数组，不会改变原对象）

从语法上看，Array.from 有 3 个参数：
● 类似数组的对象，必选；
● 加工函数，新生成的数组会经过该函数的加工再返回；
●this 作用域，表示加工函数执行时 this 的值。

这三个参数里面第一个参数是必选的，后两个参数都是可选的：

```
var obj = {0: 'a', 1: 'b', 2:'c', length: 3};

Array.from(obj, function(value, index){
  console.log(value, index, this, arguments.length);
  return value.repeat(3);   //必须指定返回值，否则返回 undefined
}, obj);
```

![image-20230221110547028](https://s3.bmp.ovh/imgs/2023/02/21/32e14f1932687c41.png)
